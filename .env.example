# .env for World_Sim - Core Configuration

############################################################
# API Keys & External Service Keys
############################################################
CDS_URL="https://cds.climate.copernicus.eu/api"
CDS_KEY="your-cds-api-key-here"

OPENROUTER_KEY=your-openrouter-api-key-here
OPENAI_API_KEY=your-openai-api-key-here
GOOGLE_MAPS_API_KEY="your-google-maps-api-key-here"

############################################################
# LLM/OPENROUTER Models & API Usage
############################################################
OPEN_ROUTER_LINK="https://openrouter.ai/api/v1/chat/completions"
OPEN_ROUTER_REASONING_MODEL="openai/gpt-oss-120b"
OPEN_ROUTER_NONREASONING_MODEL="openai/gpt-oss-120b"
OPEN_ROUTER_STUPID_MODEL="openai/gpt-oss-20b"
# OPEN_ROUTER_SEARCH_MODEL="openai/gpt-oss-20b"	
DEBUG_PROVIDER_INFO=true

USE_API=1

############################################################
# LLM/Simulation Logging & Mock/Test Flags
############################################################
VERBOSITY=3
VERBOSITY_LEVEL=0
REPORT_LLM_MODEL_CONFIG=false
STRICT_FAIL_ON_MISSING_APIS=true

ENABLE_LLM_LOGGING=false
LLM_LOG_DIR=logs/llm_responses
SIMULATION_LOG_LEVEL=INFO
SIMULATION_LOG_DIR=logs/simulation
SIMULATION_LOG_FORMAT=json

TESTING_MODE=false
MOCK_LLM_RESPONSES=true
MOCK_EMBEDDINGS=true
USE_MOCK_EMBEDDINGS=true
VERBOSE_TESTING=false

############################################################
# Agent/Worker/Planning Settings
############################################################
AGENT_INIT_MAX_WORKERS=4
PERSONAL_SUMMARY_USE_MULTIPROCESSING=1
PERSONAL_SUMMARY_BATCH_SIZE=50
SKIP_PERSONAL_SUMMARY_GENERATION=0

PLANNING_MAX_PROCESSES=6
ENABLE_INITIAL_SPATIAL_KNOWLEDGE=0

GOD_QUESTIONS_USE_SMART_MODEL=0
GOD_QUESTIONS_USE_MULTIPROCESSING=1
GOD_QUESTIONS_MAX_WORKERS=32

USE_VALHALLA_ROUTING=true

############################################################
# Memory/Vector Database Settings
############################################################
MEMORY_SYSTEM=qdrant
MEMORY_USE_VECTOR_DB=True
DISABLE_QDRANT=1

QDRANT_TARGET=docker
QDRANT_HOST_DOCKER=localhost
QDRANT_PORT_DOCKER=1002
QDRANT_GRPC_PORT_DOCKER=1003
QDRANT_HOST_NAS=192.168.0.164
QDRANT_PORT_NAS=6333
QDRANT_GRPC_PORT_NAS=6334
QDRANT_COLLECTION_PREFIX=world_sim_
QDRANT_VECTOR_SIZE=1536
QDRANT_DISTANCE_METRIC=Cosine
QDRANT_BATCH_SIZE=50
QDRANT_SEARCH_LIMIT=1000

############################################################
# Redis Cache Settings
############################################################
REDIS_HOST=192.168.0.164
REDIS_PORT=6379
REDIS_MAX_CONNECTIONS=20
REDIS_TIMEOUT=5

############################################################
# Database Settings (MySQL/PostGIS)
############################################################

# PostGIS (NAS - Remote)
POSTGRES_HOST=192.168.0.164
POSTGRES_PORT=5432
POSTGRES_DB=world_sim_geo
POSTGRES_USER=postgres
POSTGRES_PASSWORD='your-postgres-password-here'
DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}"
PGHOST=${POSTGRES_HOST}
PGPORT=${POSTGRES_PORT}
PGDATABASE=${POSTGRES_DB}
PGUSER=${POSTGRES_USER}
PGPASSWORD=${POSTGRES_PASSWORD}

# MySQL (multi-target)
DATABASE_TARGET=nas

# Docker (local dev)
DB_HOST_DOCKER=localhost
DB_PORT_DOCKER=1001
DB_NAME_DOCKER=world_sim_agents
DB_USER_DOCKER=root
DB_PASSWORD_DOCKER=world_sim_dev

# NAS (production)
DB_HOST_NAS=192.168.0.164
DB_PORT_NAS=3306
DB_USER_NAS=root
DB_PASSWORD_NAS=your-mysql-password-here

DB_AGENTS_NAME=world_sim_agents
DB_FIRMS_NAME=world_sim_firms
DB_SIM_NAME=world_sim_simulations
DB_GEO_NAME=world_sim_geo
DB_ALT_NAME=world_sim_alternative_data
DB_CENSUS_NAME=world_sim_census

DB_POOL_SIZE=8
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
SKIP_OPTIONAL_DB_POOLS=0
DB_REQUIRED_DBS=world_sim_agents,world_sim_simulations,world_sim_alternative_data

# Performance DB Settings
DB_MAX_CONNECTIONS=30
DB_CONNECTION_TIMEOUT=15
DB_QUERY_TIMEOUT=60
DB_INSERT_BATCH_SIZE=500000

############################################################
# Service URLs and Proxies
############################################################

# Service Target
SERVICE_TARGET=nas

# Docker services
PHPMYADMIN_URL_DOCKER=http://localhost:1005
GRAFANA_URL_DOCKER=http://localhost:1006
GRAFANA_USER_DOCKER=admin
GRAFANA_PASSWORD_DOCKER=admin

# NAS services
PHPMYADMIN_URL_NAS=http://192.168.0.164:8888
GRAFANA_URL_NAS=http://192.168.0.164:3000
GRAFANA_USER_NAS=admin
GRAFANA_PASSWORD_NAS=admin

# General Proxy
GENERAL_PROXY_URL="http://username:password@proxy-host:port/"

# Tile/OSM Proxy & Sources
USE_TILE_PROXY=false
TILE_HTTP_PROXIES=http://username:password@proxy-host:port/
TILE_UPSTREAM_URL=https://tile.openstreetmap.org/{z}/{x}/{y}.png
TILE_MAX_RETRIES=5
TILE_BACKOFF_BASE_MS=300
TILE_TIMEOUT_S=10

############################################################
# Data Paths
############################################################
L2_DATA_DIR='/path/to/your/l2/data'
TEST_L2_DATA_FILE='/path/to/test/l2/data.csv'
TESTING_OSM_DATA_DIRECTORY="/path/to/test/osm/data"
USE_NAS_TILES=true
TESTING_GOOGLE_MAPS_DATA_DIRECTORY="/path/to/test/google/maps/data"
NAS_MAPS_DATA_DIRECTORY="/path/to/nas/maps/data"
TESTING_SIMULATION_RESULT_OUTPUT_DIRECTORY="/path/to/simulation/output"
# OSM_POINTS_CSV_PATH and R_TREE_PATH: set if using OSM/r-tree exports
# OSM_POINTS_CSV_PATH="/path/to/osm/points.csv"
# R_TREE_PATH="/path/to/r-tree"

############################################################
# Valhalla Routing Service
############################################################
VALHALLA_HOST=192.168.0.164
VALHALLA_PORT=5433
VALHALLA_TIMEOUT=30.0
ROUTING_DEFAULT_MODE=auto
ROUTING_DEFAULT_UNITS=miles
ROUTING_MAX_ALTERNATES=3

############################################################
# Logging and Performance
############################################################
DB_LOG_QUERIES=false
DB_LOG_SLOW_QUERIES=true
DB_SLOW_QUERY_THRESHOLD=1000

